<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Sagi - Integração iSat</title>
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700"
      rel="stylesheet"
      type="text/css"
    />
    <link rel="stylesheet" href="../assets/css/styles.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js"></script>
  </head>
  <body>
    <div id="root">
      <div class="row">
        <div class="child-row">
          <div style="display: flex; justify-content: space-between">
            <h1>Gerais:</h1>
            <div style="display: flex">
              <button
                style="margin-right: 5px"
                id="run_generals"
                onClick="startStopLogs('generals')"
              >
                Stop
              </button>
              <button
                class="btn-secondary"
                id="clear_generals"
                onClick="clearLogs('generals')"
              >
                Clear
              </button>
            </div>
          </div>

          <div class="boxLogs" id="boxLogs_generals"><ul></ul></div>
        </div>
        <div class="child-row">
          <div style="display: flex; justify-content: space-between">
            <h1>Veículos:</h1>
            <div style="display: flex">
              <button
                style="margin-right: 5px"
                id="run_vehicles"
                onClick="startStopLogs('vehicles')"
              >
                Stop
              </button>
              <button
                class="btn-secondary"
                id="clear_vehicles"
                onClick="clearLogs('vehicles')"
              >
                Clear
              </button>
            </div>
          </div>

          <div class="boxLogs" id="boxLogs_vehicles"><ul></ul></div>
        </div>
      </div>
      <div class="row">
        <div class="child-row">
          <div style="display: flex; justify-content: space-between">
            <h1>Referências:</h1>
            <div style="display: flex">
              <button
                style="margin-right: 5px"
                id="run_references"
                onClick="startStopLogs('references')"
              >
                Stop
              </button>
              <button
                class="btn-secondary"
                id="clear_references"
                onClick="clearLogs('references')"
              >
                Clear
              </button>
            </div>
          </div>

          <div class="boxLogs" id="boxLogs_references"><ul></ul></div>
        </div>
        <div class="child-row">
          <div style="display: flex; justify-content: space-between">
            <h1>Ordens:</h1>
            <div style="display: flex">
              <button
                style="margin-right: 5px"
                id="run_orders"
                onClick="startStopLogs('orders')"
              >
                Stop
              </button>
              <button
                class="btn-secondary"
                id="clear_orders"
                onClick="clearLogs('orders')"
              >
                Clear
              </button>
            </div>
          </div>

          <div class="boxLogs" id="boxLogs_orders"><ul></ul></div>
        </div>
      </div>
      <div class="row">
        <div class="child-row">
          <div style="display: flex; justify-content: space-between">
            <h1>Caçambas/Tipos:</h1>
            <div style="display: flex">
              <button
                style="margin-right: 5px"
                id="run_containers"
                onClick="startStopLogs('containers')"
              >
                Stop
              </button>
              <button
                class="btn-secondary"
                id="clear_containers"
                onClick="clearLogs('containers')"
              >
                Clear
              </button>
            </div>
          </div>

          <div class="boxLogs" id="boxLogs_containers"><ul></ul></div>
        </div>
        <div class="child-row">
          <div style="display: flex; justify-content: space-between">
            <h1>Boletos/Pesagens:</h1>
            <div style="display: flex">
              <button
                style="margin-right: 5px"
                id="run_tickets"
                onClick="startStopLogs('tickets')"
              >
                Stop
              </button>
              <button
                class="btn-secondary"
                id="clear_tickets"
                onClick="clearLogs('tickets')"
              >
                Clear
              </button>
            </div>
          </div>

          <div class="boxLogs" id="boxLogs_tickets"><ul></ul></div>
        </div>
      </div>
      <div class="row">
        <div class="child-row">
          <div style="display: flex; justify-content: space-between">
            <h1>Categorias de Fornecedores:</h1>
            <div style="display: flex">
              <button
                style="margin-right: 5px"
                id="run_categoria_de_fornecedores"
                onClick="startStopLogs('categoria_de_fornecedores')"
              >
                Stop
              </button>
              <button
                class="btn-secondary"
                id="clear_categoria_de_fornecedores"
                onClick="clearLogs('categoria_de_fornecedores')"
              >
                Clear
              </button>
            </div>
          </div>

          <div class="boxLogs" id="boxLogs_categoria_de_fornecedores"><ul></ul></div>
        </div>
        <div class="child-row">
          <div style="display: flex; justify-content: space-between">
            <h1>Sagi Unidades:</h1>
            <div style="display: flex">
              <button
                style="margin-right: 5px"
                id="run_sagi_unidades"
                onClick="startStopLogs('sagi_unidades')"
              >
                Stop
              </button>
              <button
                class="btn-secondary"
                id="clear_sagi_unidades"
                onClick="clearLogs('sagi_unidades')"
              >
                Clear
              </button>
            </div>
          </div>

          <div class="boxLogs" id="boxLogs_sagi_unidades"><ul></ul></div>
        </div>
      </div>
      <div class="row">
        <div class="child-row">
          <div style="display: flex; justify-content: space-between">
            <h1>Setores:</h1>
            <div style="display: flex">
              <button
                style="margin-right: 5px"
                id="run_setores"
                onClick="startStopLogs('setores')"
              >
                Stop
              </button>
              <button
                class="btn-secondary"
                id="clear_setores"
                onClick="clearLogs('setores')"
              >
                Clear
              </button>
            </div>
          </div>

          <div class="boxLogs" id="boxLogs_setores"><ul></ul></div>
        </div>
        <div class="child-row">
          <div style="display: flex; justify-content: space-between">
            <h1>Classificadores:</h1>
            <div style="display: flex">
              <button
                style="margin-right: 5px"
                id="run_classificadores"
                onClick="startStopLogs('classificadores')"
              >
                Stop
              </button>
              <button
                class="btn-secondary"
                id="clear_classificadores"
                onClick="clearLogs('classificadores')"
              >
                Clear
              </button>
            </div>
          </div>

          <div class="boxLogs" id="boxLogs_classificadores"><ul></ul></div>
        </div>
      </div>
      <div class="row">
        <div class="child-row">
          <div style="display: flex; justify-content: space-between">
            <h1>Região:</h1>
            <div style="display: flex">
              <button
                style="margin-right: 5px"
                id="run_regiao"
                onClick="startStopLogs('regiao')"
              >
                Stop
              </button>
              <button
                class="btn-secondary"
                id="clear_regiao"
                onClick="clearLogs('regiao')"
              >
                Clear
              </button>
            </div>
          </div>

          <div class="boxLogs" id="boxLogs_regiao"><ul></ul></div>
        </div>
        <div class="child-row">
          <div style="display: flex; justify-content: space-between">
            <h1>Funcionários:</h1>
            <div style="display: flex">
              <button
                style="margin-right: 5px"
                id="run_funcionarios"
                onClick="startStopLogs('funcionarios')"
              >
                Stop
              </button>
              <button
                class="btn-secondary"
                id="clear_funcionarios"
                onClick="clearLogs('funcionarios')"
              >
                Clear
              </button>
            </div>
          </div>

          <div class="boxLogs" id="boxLogs_funcionarios"><ul></ul></div>
        </div>
      </div>
      <div class="row">
        <div class="child-row">
          <div style="display: flex; justify-content: space-between">
            <h1>Orgão Ambiental:</h1>
            <div style="display: flex">
              <button
                style="margin-right: 5px"
                id="run_controladores"
                onClick="startStopLogs('controladores')"
              >
                Stop
              </button>
              <button
                class="btn-secondary"
                id="clear_controladores"
                onClick="clearLogs('controladores')"
              >
                Clear
              </button>
            </div>
          </div>

          <div class="boxLogs" id="boxLogs_controladores"><ul></ul></div>
        </div>
        <div class="child-row">
          <div style="display: flex; justify-content: space-between">
            <h1>Checklist Resíduos:</h1>
            <div style="display: flex">
              <button
                style="margin-right: 5px"
                id="run_checklist"
                onClick="startStopLogs('checklist')"
              >
                Stop
              </button>
              <button
                class="btn-secondary"
                id="clear_checklist"
                onClick="clearLogs('checklist')"
              >
                Clear
              </button>
            </div>
          </div>

          <div class="boxLogs" id="boxLogs_checklist"><ul></ul></div>
        </div>
      </div>
      <div class="row">
        <div class="child-row">
          <div style="display: flex; justify-content: space-between">
            <h1>Forma Pagamentos:</h1>
            <div style="display: flex">
              <button
                style="margin-right: 5px"
                id="run_sagi_forma_pagtos"
                onClick="startStopLogs('sagi_forma_pagtos')"
              >
                Stop
              </button>
              <button
                class="btn-secondary"
                id="clear_sagi_forma_pagtos"
                onClick="clearLogs('sagi_forma_pagtos')"
              >
                Clear
              </button>
            </div>
          </div>

          <div class="boxLogs" id="boxLogs_sagi_forma_pagtos"><ul></ul></div>
        </div>
        <div class="child-row">
          <div style="display: flex; justify-content: space-between">
            <h1>Centro de Contas:</h1>
            <div style="display: flex">
              <button
                style="margin-right: 5px"
                id="run_centro_de_contas"
                onClick="startStopLogs('centro_de_contas')"
              >
                Stop
              </button>
              <button
                class="btn-secondary"
                id="clear_centro_de_contas"
                onClick="clearLogs('centro_de_contas')"
              >
                Clear
              </button>
            </div>
          </div>

          <div class="boxLogs" id="boxLogs_centro_de_contas"><ul></ul></div>
        </div>
      </div>
      <div class="row">
        <div class="child-row">
          <div style="display: flex; justify-content: space-between">
            <h1>Centro de Custos:</h1>
            <div style="display: flex">
              <button
                style="margin-right: 5px"
                id="run_centro_de_custos"
                onClick="startStopLogs('centro_de_custos')"
              >
                Stop
              </button>
              <button
                class="btn-secondary"
                id="clear_centro_de_custos"
                onClick="clearLogs('centro_de_custos')"
              >
                Clear
              </button>
            </div>
          </div>

          <div class="boxLogs" id="boxLogs_centro_de_custos"><ul></ul></div>
        </div>
        <div class="child-row">
          <div style="display: flex; justify-content: space-between">
            <h1>Prazos:</h1>
            <div style="display: flex">
              <button
                style="margin-right: 5px"
                id="run_prazos"
                onClick="startStopLogs('prazos')"
              >
                Stop
              </button>
              <button
                class="btn-secondary"
                id="clear_prazos"
                onClick="clearLogs('prazos')"
              >
                Clear
              </button>
            </div>
          </div>

          <div class="boxLogs" id="boxLogs_prazos"><ul></ul></div>
        </div>
      </div>
      <div class="row">
        <div class="child-row">
          <div style="display: flex; justify-content: space-between">
            <h1>Credores:</h1>
            <div style="display: flex">
              <button
                style="margin-right: 5px"
                id="run_credores"
                onClick="startStopLogs('credores')"
              >
                Stop
              </button>
              <button
                class="btn-secondary"
                id="clear_credores"
                onClick="clearLogs('credores')"
              >
                Clear
              </button>
            </div>
          </div>

          <div class="boxLogs" id="boxLogs_credores"><ul></ul></div>
        </div>
        <div class="child-row">
          <div style="display: flex; justify-content: space-between">
            <h1>Vendedores:</h1>
            <div style="display: flex">
              <button
                style="margin-right: 5px"
                id="run_vendedores"
                onClick="startStopLogs('vendedores')"
              >
                Stop
              </button>
              <button
                class="btn-secondary"
                id="clear_vendedores"
                onClick="clearLogs('vendedores')"
              >
                Clear
              </button>
            </div>
          </div>

          <div class="boxLogs" id="boxLogs_vendedores"><ul></ul></div>
        </div>
      </div>
      <div class="row">
        <div class="child-row">
          <div style="display: flex; justify-content: space-between">
            <h1>Compradores:</h1>
            <div style="display: flex">
              <button
                style="margin-right: 5px"
                id="run_compradores"
                onClick="startStopLogs('compradores')"
              >
                Stop
              </button>
              <button
                class="btn-secondary"
                id="clear_compradores"
                onClick="clearLogs('compradores')"
              >
                Clear
              </button>
            </div>
          </div>

          <div class="boxLogs" id="boxLogs_compradores"><ul></ul></div>
        </div>
        <div class="child-row">
          <div style="display: flex; justify-content: space-between">
            <h1>Usuários:</h1>
            <div style="display: flex">
              <button
                style="margin-right: 5px"
                id="run_usuarios"
                onClick="startStopLogs('usuarios')"
              >
                Stop
              </button>
              <button
                class="btn-secondary"
                id="clear_usuarios"
                onClick="clearLogs('usuarios')"
              >
                Clear
              </button>
            </div>
          </div>

          <div class="boxLogs" id="boxLogs_usuarios"><ul></ul></div>
        </div>
      </div>
      <div class="row">
        <div class="child-row">
          <div style="display: flex; justify-content: space-between">
            <h1>Categoria de Produtos:</h1>
            <div style="display: flex">
              <button
                style="margin-right: 5px"
                id="run_categoria_de_produtos"
                onClick="startStopLogs('categoria_de_produtos')"
              >
                Stop
              </button>
              <button
                class="btn-secondary"
                id="clear_categoria_de_produtos"
                onClick="clearLogs('categoria_de_produtos')"
              >
                Clear
              </button>
            </div>
          </div>

          <div class="boxLogs" id="boxLogs_categoria_de_produtos"><ul></ul></div>
        </div>
        <div class="child-row">
          <div style="display: flex; justify-content: space-between">
            <h1>Tipo de Produtos:</h1>
            <div style="display: flex">
              <button
                style="margin-right: 5px"
                id="run_tipo_de_produtos"
                onClick="startStopLogs('tipo_de_produtos')"
              >
                Stop
              </button>
              <button
                class="btn-secondary"
                id="clear_tipo_de_produtos"
                onClick="clearLogs('tipo_de_produtos')"
              >
                Clear
              </button>
            </div>
          </div>

          <div class="boxLogs" id="boxLogs_tipo_de_produtos"><ul></ul></div>
        </div>
      </div>
      <div class="row">
        <div class="child-row">
          <div style="display: flex; justify-content: space-between">
            <h1>Produtos ONU:</h1>
            <div style="display: flex">
              <button
                style="margin-right: 5px"
                id="run_sagi_lista_onu"
                onClick="startStopLogs('sagi_lista_onu')"
              >
                Stop
              </button>
              <button
                class="btn-secondary"
                id="clear_sagi_lista_onu"
                onClick="clearLogs('sagi_lista_onu')"
              >
                Clear
              </button>
            </div>
          </div>

          <div class="boxLogs" id="boxLogs_sagi_lista_onu"><ul></ul></div>
        </div>
        <div class="child-row">
          <div style="display: flex; justify-content: space-between">
            <h1>Ncm:</h1>
            <div style="display: flex">
              <button
                style="margin-right: 5px"
                id="run_ncm"
                onClick="startStopLogs('ncm')"
              >
                Stop
              </button>
              <button
                class="btn-secondary"
                id="clear_ncm"
                onClick="clearLogs('ncm')"
              >
                Clear
              </button>
            </div>
          </div>

          <div class="boxLogs" id="boxLogs_ncm"><ul></ul></div>
        </div>
      </div>
      <div class="row">
        <div class="child-row">
          <div style="display: flex; justify-content: space-between">
            <h1>Produtos:</h1>
            <div style="display: flex">
              <button
                style="margin-right: 5px"
                id="run_produtos"
                onClick="startStopLogs('produtos')"
              >
                Stop
              </button>
              <button
                class="btn-secondary"
                id="clear_produtos"
                onClick="clearLogs('produtos')"
              >
                Clear
              </button>
            </div>
          </div>

          <div class="boxLogs" id="boxLogs_produtos"><ul></ul></div>
        </div>
        <div class="child-row">
          <div style="display: flex; justify-content: space-between">
            <h1>Produtos2:</h1>
            <div style="display: flex">
              <button
                style="margin-right: 5px"
                id="run_produtos2"
                onClick="startStopLogs('produtos2')"
              >
                Stop
              </button>
              <button
                class="btn-secondary"
                id="clear_produtos2"
                onClick="clearLogs('produtos2')"
              >
                Clear
              </button>
            </div>
          </div>

          <div class="boxLogs" id="boxLogs_produtos2"><ul></ul></div>
        </div>
      </div>
      <div class="row">
        <div class="child-row">
          <div style="display: flex; justify-content: space-between">
            <h1>Classe de Credores:</h1>
            <div style="display: flex">
              <button
                style="margin-right: 5px"
                id="run_classe_de_credores"
                onClick="startStopLogs('classe_de_credores')"
              >
                Stop
              </button>
              <button
                class="btn-secondary"
                id="clear_classe_de_credores"
                onClick="clearLogs('classe_de_credores')"
              >
                Clear
              </button>
            </div>
          </div>

          <div class="boxLogs" id="boxLogs_classe_de_credores"><ul></ul></div>
        </div>
        <div class="child-row">
          <div style="display: flex; justify-content: space-between">
            <h1>Contratos de Serviço:</h1>
            <div style="display: flex">
              <button
                style="margin-right: 5px"
                id="run_contratos_de_servico"
                onClick="startStopLogs('contratos_de_servico')"
              >
                Stop
              </button>
              <button
                class="btn-secondary"
                id="clear_contratos_de_servico"
                onClick="clearLogs('contratos_de_servico')"
              >
                Clear
              </button>
            </div>
          </div>

          <div class="boxLogs" id="boxLogs_contratos_de_servico"><ul></ul></div>
        </div>
      </div>
      <div class="row">
        <div class="child-row">
          <div style="display: flex; justify-content: space-between">
            <h1>Tipo de Caminhão:</h1>
            <div style="display: flex">
              <button
                style="margin-right: 5px"
                id="run_tipo_caminhao"
                onClick="startStopLogs('tipo_caminhao')"
              >
                Stop
              </button>
              <button
                class="btn-secondary"
                id="clear_tipo_caminhao"
                onClick="clearLogs('tipo_caminhao')"
              >
                Clear
              </button>
            </div>
          </div>

          <div class="boxLogs" id="boxLogs_tipo_caminhao"><ul></ul></div>
        </div>
        <div class="child-row">
          <div style="display: flex; justify-content: space-between">
            <h1>Ativos:</h1>
            <div style="display: flex">
              <button
                style="margin-right: 5px"
                id="run_ativos"
                onClick="startStopLogs('ativos')"
              >
                Stop
              </button>
              <button
                class="btn-secondary"
                id="clear_ativos"
                onClick="clearLogs('ativos')"
              >
                Clear
              </button>
            </div>
          </div>

          <div class="boxLogs" id="boxLogs_ativos"><ul></ul></div>
        </div>
      </div>
      <div class="row">
        <div class="child-row" style="width: 100%">
          <div style="display: flex; justify-content: space-between">
            <h1>Tokens:</h1>
          </div>

          <div class="boxLogs" id="boxLogs_tokens"><ul></ul></div>
        </div>
      </div>
    </div>
    <script type="text/javascript">
      const { ipcRenderer, app } = require("electron");
      const { v4: uuidv4 } = require("uuid");

      const logs = {
        containers: [],
        vehicles: [],
        references: [],
        orders: [],
        generals: [],
        tickets: [],
        tokens: [],
        categoria_de_fornecedores: [],
        sagi_unidades: [],
        setores: [],
        classificadores: [],
        regiao: [],
        funcionarios: [],
        controladores: [],
        checklist: [],
        sagi_forma_pagtos: [],
        centro_de_contas: [],
        centro_de_custos: [],
        prazos: [],
        credores: [],
        vendedores: [],
        compradores: [],
        usuarios: [],
        categoria_de_produtos: [],
        ncm: [],
        tipo_de_produtos: [],
        sagi_lista_onu: [],
        produtos: [],
        produtos2: [],
        contratos_de_servico: [],
        classe_de_credores: [],
        tipo_caminhao: [],
        ativos: [],
      };
      const runs = {
        containers: true,
        vehicles: true,
        references: true,
        orders: true,
        generals: true,
        tickets: true,
        tokens: true,
        categoria_de_fornecedores: true,
        sagi_unidades: true,
        setores: true,
        classificadores: true,
        regiao: true,
        funcionarios: true,
        controladores: true,
        checklist: true,
        sagi_forma_pagtos: true,
        centro_de_contas: true,
        centro_de_custos: true,
        prazos: true,
        credores: true,
        vendedores: true,
        compradores: true,
        usuarios: true,
        categoria_de_produtos: true,
        ncm: true,
        tipo_de_produtos: true,
        sagi_lista_onu: true,
        produtos: true,
        produtos2: true,
        contratos_de_servico: true,
        classe_de_credores: true,
        tipo_caminhao: true,
        ativos: true,
      };

      const globals = {
        nomegeral: null,
        is_cloud: true,
      };

      ipcRenderer.on("log", (event, arg) => {
        if (runs[arg.type]) {
          createLog(arg.log, arg.type);
        }
      });

      function createLog(description, type) {
        const ul = document.querySelector(`#boxLogs_${type} ul`);

        if (logs[type].length >= 1000) {
          removeAllChildNodes(ul, type);
        }

        const id = uuidv4();

        const li = document.createElement("li");

        li.setAttribute("id", id);
        li.appendChild(document.createTextNode(description));
        ul.appendChild(li);

        logs[type].push({ id });
      }

      function startStopLogs(type) {
        runs[type] = !runs[type];
        const button = document.querySelector(`button#run_${type}`);

        button.innerHTML = runs[type] ? "Stop Logs" : "Start Logs";
        button.classList.toggle("btn-success");
      }

      function clearLogs(type) {
        const _logs = logs[type].splice(0, logs[type].length);

        _logs.forEach((log) => document.getElementById(log.id).remove());
      }

      function removeAllChildNodes(parent, type) {
        while (parent.firstChild) {
          parent.removeChild(parent.firstChild);
        }
        logs[type] = [];
      }

      (async function checkIsCloud() {
        globals.is_cloud = await ipcRenderer.invoke("checkIsCloud");

        if (globals.is_cloud === false) {
          getNomeGeralAndConnectToWs();
        }
      })();

      async function getNomeGeralAndConnectToWs() {
        globals.nomegeral = await ipcRenderer.invoke("getNomeGeral");

        if (!globals.nomegeral) {
          setTimeout(() => getNomeGeralAndConnectToWs(), 30000);
        } else {
          const socket = io("https://websocket.sagisolutions.com:3000", {
            transports: ["websocket"],
          });

          socket.on("connect", () => {
            createLog(`(${new Date().toLocaleString()}) - WebSocket conectado`, "generals");

            socket.emit("join", [globals.nomegeral]);
          });

          socket.on("event", (event) => {
            const notification = {
              title: null,
              body: null,
            };

            const split_datahora = event.datahora.split(" ");

            if (
              event.type == "GTIGN" ||
              event.type == "GTFRI" ||
              event.type == "ONSTOP" ||
              event.type == "GTMPF" ||
              event.type == "OUTSIDETHEFENCE" ||
              event.type == "INSIDETHEFENCE"
            ) {
              notification.title = event.placa + " - " + event.title;
              notification.body = "Data/Hora: " + split_datahora[0].split("-").reverse().join("/")+" "+split_datahora[1];
            }

            if (event.type == "GTHBM") {
              notification.title = event.placa + " - " + event.title;
              notification.body = "Data/Hora: " + split_datahora[0].split("-").reverse().join("/")+" "+split_datahora[1] + " e Velocidade: " + event.speed + " Km/h";
            }

            if (localStorage.getItem("@integrador_isat:notifications") === "true" && notification.title !== null && notification.body !== null) {
              new Notification(notification.title, {
                body: notification.body,
                icon: "../assets/image/logo.png",
              });
            }
          });
        }
      };
    </script>

    <div id="notification" class="hidden">
      <p id="message"></p>
    </div>
    <script>
      const notification = document.getElementById("notification");
      const message = document.getElementById("message");

      ipcRenderer.on("update_available", () => {
        ipcRenderer.removeAllListeners("update_available");
        message.innerText = "A new update is available. Downloading now...";
        notification.classList.remove("hidden");
      });

      ipcRenderer.on("update_downloaded", () => {
        ipcRenderer.removeAllListeners("update_downloaded");
        message.innerText =
          "Update Downloaded. It will be installed on restart. Restart now?";
        notification.classList.remove("hidden");
        ipcRenderer.send("restart_app");
      });
    </script>
    <script>
      (async () => {
        document.title = `Sagi - Integração iSat (${await ipcRenderer.invoke(
          "getAppVersion"
        )})`;
      })();

      (async function getTokens() {
        globals.tokens = await ipcRenderer.invoke("getTokens");

        if (globals.tokens) {
          const _logs = logs["tokens"].splice(0, logs["tokens"].length);

          _logs.forEach((log) => document.getElementById(log.id).remove());

          globals.tokens.forEach((token) => {
            const id = uuidv4();

            const ul = document.querySelector(`#boxLogs_tokens ul`);
            const li = document.createElement("li");

            li.setAttribute("id", id);
            ul.appendChild(li);
            const elem = document.getElementById(id);
            elem.innerHTML = `
              <b>Filial</b>: ${token.filial} / <b>Status</b>: ${
              token.usa.trim() === ".T." ? "SIM" : "NÃO"
            } / <b>Token</b>: ${token.token} / <b>Data Inicial</b>: ${
              token.data_inicial_sinc_isat
            } / <b>Movimenta Caçambas</b>: ${
              token.movimenta_cacamba ? "SIM" : "NÃO"
            }
            `;
            elem.style.lineHeight = "25px";

            logs["tokens"].push({ id });
          });
        }

        setTimeout(() => getTokens(), 60000);
      })();

      ipcRenderer.on("change_notifications", () => {
        const notifications = localStorage.getItem("@integrador_isat:notifications");
        const new_notifications = notifications === null || notifications === "false" ? "true" : "false";

        localStorage.setItem("@integrador_isat:notifications", new_notifications);

        ipcRenderer.send('status_notifications', new_notifications)
      });
    </script>
  </body>
</html>
